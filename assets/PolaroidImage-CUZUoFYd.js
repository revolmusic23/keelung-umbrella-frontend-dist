import{n as m,e as y,v as b,i as z,o as _,f as I,b as B,h as P,F as V}from"./index-DbNPxDwC.js";const E=["width","height"],M=["src"],u=450,h=20,L={__name:"PolaroidImage",props:{imgSrc:{type:String},title:{type:String},description:{type:String}},setup(x){const l=x;m({});const d=y(null),n=y(null),i=m({width:0,height:0}),o=m({width:u,height:0});b(async()=>{l.imgSrc&&await v(l.imgSrc)}),z(()=>l.imgSrc,async t=>{t&&await v(l.imgSrc)});const C=t=>new Promise((e,a)=>{const s=new Image;s.crossOrigin="Anonymous",s.onload=()=>e(s),s.onerror=a,s.src=t}),v=async t=>{try{if(!t)return;n.value=await C(l.imgSrc||t),console.log(n.value.width,n.value.height),T(n.value.width,n.value.height),A(i.width,i.height);const e=document.createElement("canvas");e.width=o.width,e.height=o.height,console.log(o,i);const a=e.getContext("2d");k(a),D(a),N(a),d.value=e.toDataURL("image/png")}catch(e){console.error("Error generating image:",e)}},A=(t,e)=>{o.width=u,o.height=e+120},T=(t,e)=>{i.width=u-h*2,t===e?i.height=i.width:t>e?i.height=i.width*Math.max(e/t,9/16):i.height=i.width*Math.min(e/t,3/2),console.log(i)},k=t=>{t.fillStyle="GhostWhite",t.fillRect(0,0,o.width,o.height)},D=t=>{const e=i.width/n.value.width,a={width:n.value.width*e,height:n.value.height*e};console.log(n.value.width,n.value.height),console.log(i),console.log(a);const s={x:(a.width-i.width)/2,y:(a.height-i.height)/2};console.log(s),t.drawImage(n.value,s.x,s.y,i.width/e,i.height/e,h,h,i.width,i.height)},N=t=>{let e=h+i.height+40;e=p(t,l.title?l.title:"-",20,o.width-h*2,e),e+=10,p(t,l.description?l.description:"-",14,o.width-h*2,e)},p=(t,e,a,s,W)=>{t.font=`${a}px Arial`,t.fillStyle="black";const w=e.split(" ");let r="",S=a*1.2,g=W;for(let c=0;c<w.length;c++){let f=r+w[c]+" ";t.measureText(f).width>s&&c>0?(t.fillText(r,h,g),r=w[c]+" ",g+=S):r=f}return t.fillText(r,h,g),g+S};return(t,e)=>(_(),I(V,null,[B("canvas",{ref:"canvas",width:o.width,height:o.height,style:{display:"none"}},null,8,E),d.value?(_(),I("img",{key:0,src:d.value,style:{width:"100%","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)"}},null,8,M)):P("",!0)],64))}};export{L as _};
