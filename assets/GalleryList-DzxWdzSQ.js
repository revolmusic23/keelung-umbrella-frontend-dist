import{s as C,p as I,l as V,m as b,e as i,f as w,r as l,o as f,c as L,w as g,b as c,j as X,a as _,t as M,q as N,h as S,F as U}from"./index-C5Y_fbBl.js";import{s as G}from"./services-MGYLFbSm.js";import"./dom-to-image-TXy_c0g6.js";const F={class:"mb-4"},R={class:"gallary-info-paragraph text-white"},$={class:"mb-2"},j={class:"text-caption"},q={__name:"GalleryInfoModal",props:{showModal:Boolean,uuid:String},emits:["update:showModal","confirm"],setup(y,{emit:t}){C(),I();const u=V(),m=b(()=>u.state.isLoading),a=y,d=t,n=i(!1);w(()=>a.showModal,s=>{n.value=s}),w(n,s=>{d("update:showModal",s),s?v():e.value={}});const e=i({}),o=i(""),v=async()=>{console.log("props.uuid:",a.uuid),[o.value,e.value]=await G.getGalleryInfo(a.uuid),console.log(e.value)};return(s,p)=>{const r=l("XLoadingCircle"),h=l("v-img"),k=l("v-card"),x=l("v-dialog");return f(),L(x,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=B=>n.value=B),class:"w-100 w-md-75","max-width":"500",opacity:.85},{default:g(()=>[c(k,{class:"pa-4 rounded-lg",color:"transparent",elevation:"0"},{default:g(()=>[m.value?(f(),L(r,{key:0})):X("",!0),_("div",F,[c(h,{src:e.value.src,class:""},null,8,["src"])]),_("div",R,[_("h4",$,M(e.value.description),1),_("div",j,"#"+M(e.value.number),1)])]),_:1})]),_:1},8,["modelValue"])}}},A={__name:"GalleryList",setup(y){I();const t=i({current_page:0,last_page:1/0}),u=i([]),m=async({done:e})=>{try{let o;[o,t.value]=await G.getGalleryList(),u.value.push(...o),console.log("galleryList:",u.value),console.log("pagination:",t.value),t.value.current_page<t.value.last_page?e("ok"):e("empty")}catch{e("empty")}},a=i(""),d=N({galleryInfo:!1}),n={galleryInfo:e=>{a.value=e,d.galleryInfo=!0,console.log(a.value)}};return(e,o)=>{const v=l("v-img"),s=l("XBaseGridLayout"),p=l("v-infinite-scroll");return f(),S(U,null,[c(p,{onLoad:m,color:"orange"},{default:g(()=>[c(s,{cards:u.value},{card:g(({item:r})=>[c(v,{onClick:h=>n.galleryInfo(r.uuid),src:r.images[0].framed_image_path,placeholder:"載入中"},null,8,["onClick","src"])]),_:1},8,["cards"])]),_:1}),c(q,{showModal:d.galleryInfo,"onUpdate:showModal":o[0]||(o[0]=r=>d.galleryInfo=r),uuid:a.value},null,8,["showModal","uuid"])],64)}}};export{A as default};
